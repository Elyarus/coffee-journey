{"version":3,"sources":["script.js"],"names":["carrito","JSON","parse","localStorage","getItem","productosContainer","document","querySelector","contadorCarrito","createElement","id","style","marginLeft","fontWeight","appendChild","actualizarContador","totalProductos","reduce","acc","producto","cantidad","textContent","carritoSection","getElementById","carritoProductosDiv","carritoTotalP","botonVaciar","mostrarCarrito","innerHTML","length","forEach","index","productoDiv","classList","add","border","padding","marginBottom","display","justifyContent","alignItems","title","price","toFixed","inputCantidad","addEventListener","e","nuevaCantidad","parseInt","target","value","guardarActualizar","botonEliminar","splice","total","setItem","stringify","cargarProductos","fetch","respuesta","json","productos","card","image","boton","agregarAlCarrito","console","error","productoEnCarrito","find","p","push","alert","formulario","event","preventDefault","nombre","trim","email","mensaje","emailRegex","errores","test","join","submit"],"mappings":"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","sourcesContent":["// Declaramos carrito\r\nlet carrito = JSON.parse(localStorage.getItem(\"carrito\")) || [];\r\n\r\n// Contenedor donde se van a renderizar los productos\r\nconst productosContainer = document.querySelector(\".productos-container\");\r\n\r\n// Contador del carrito\r\nconst contadorCarrito = document.createElement(\"span\");\r\ncontadorCarrito.id = \"contador-carrito\";\r\ncontadorCarrito.style.marginLeft = \"10px\";\r\ncontadorCarrito.style.fontWeight = \"bold\";\r\ndocument.querySelector(\"nav ul\").appendChild(contadorCarrito);\r\n\r\nfunction actualizarContador() {\r\n  const totalProductos = carrito.reduce(\r\n    (acc, producto) => acc + producto.cantidad,\r\n    0\r\n  );\r\n  contadorCarrito.textContent =\r\n    totalProductos > 0 ? `Carrito: ${totalProductos}` : \"\";\r\n}\r\nconst carritoSection = document.getElementById(\"carrito\");\r\nconst carritoProductosDiv = document.getElementById(\"carrito-productos\");\r\nconst carritoTotalP = document.getElementById(\"carrito-total\");\r\nconst botonVaciar = document.getElementById(\"vaciar-carrito\");\r\n\r\n// Función para mostrar el carrito\r\nfunction mostrarCarrito() {\r\n  carritoProductosDiv.innerHTML = \"\";\r\n\r\n  if (carrito.length === 0) {\r\n    carritoProductosDiv.innerHTML = \"<p>El carrito está vacío.</p>\";\r\n    carritoTotalP.textContent = \"\";\r\n    return;\r\n  }\r\n\r\n  carrito.forEach((producto, index) => {\r\n    const productoDiv = document.createElement(\"div\");\r\n    productoDiv.classList.add(\"producto-carrito\");\r\n    productoDiv.style.border = \"1px solid #b67b5b\";\r\n    productoDiv.style.padding = \"10px\";\r\n    productoDiv.style.marginBottom = \"10px\";\r\n    productoDiv.style.display = \"flex\";\r\n    productoDiv.style.justifyContent = \"space-between\";\r\n    productoDiv.style.alignItems = \"center\";\r\n\r\n    productoDiv.innerHTML = `\r\n      <div>\r\n        <strong>${producto.title}</strong><br/>\r\n        Precio unitario: $${producto.price.toFixed(2)}<br/>\r\n        Cantidad: <input type=\"number\" min=\"1\" value=\"${\r\n          producto.cantidad\r\n        }\" style=\"width: 50px;\" />\r\n      </div>\r\n      <button>Eliminar</button>\r\n    `;\r\n\r\n    // Cambiar cantidad\r\n    const inputCantidad = productoDiv.querySelector(\"input\");\r\n    inputCantidad.addEventListener(\"change\", (e) => {\r\n      const nuevaCantidad = parseInt(e.target.value);\r\n      if (nuevaCantidad >= 1) {\r\n        carrito[index].cantidad = nuevaCantidad;\r\n        guardarActualizar();\r\n      } else {\r\n        e.target.value = carrito[index].cantidad;\r\n      }\r\n    });\r\n\r\n    // Botón eliminar\r\n    const botonEliminar = productoDiv.querySelector(\"button\");\r\n    botonEliminar.addEventListener(\"click\", () => {\r\n      carrito.splice(index, 1);\r\n      guardarActualizar();\r\n      mostrarCarrito();\r\n      actualizarContador();\r\n    });\r\n\r\n    carritoProductosDiv.appendChild(productoDiv);\r\n  });\r\n\r\n  // Mostrar total\r\n  const total = carrito.reduce(\r\n    (acc, producto) => acc + producto.price * producto.cantidad,\r\n    0\r\n  );\r\n  carritoTotalP.textContent = `Total: $${total.toFixed(2)}`;\r\n}\r\n\r\n// Función para guardar carrito en localStorage y actualizar contador\r\nfunction guardarActualizar() {\r\n  localStorage.setItem(\"carrito\", JSON.stringify(carrito));\r\n  actualizarContador();\r\n  mostrarCarrito();\r\n}\r\n\r\n// Vaciar carrito\r\nbotonVaciar.addEventListener(\"click\", () => {\r\n  carrito = [];\r\n  guardarActualizar();\r\n});\r\n\r\n// Mostrar carrito al cargar la página\r\nmostrarCarrito();\r\n\r\n// Función para renderizar productos desde la API\r\nasync function cargarProductos() {\r\n  try {\r\n    const respuesta = await fetch(\"cafes.json\");\r\n    const productos = await respuesta.json();\r\n\r\n    productosContainer.innerHTML = \"\"; // Limpiar container antes de agregar\r\n\r\n    productos.forEach((producto) => {\r\n      const card = document.createElement(\"div\");\r\n      card.classList.add(\"producto\");\r\n\r\n      card.innerHTML = `\r\n        <img src=\"${producto.image}\" alt=\"${producto.title}\" />\r\n        <h3>${producto.title}</h3>\r\n        <p>Precio: $${producto.price}</p>\r\n        <button>Agregar al carrito</button>\r\n      `;\r\n\r\n      // Agregar evento click al botón para agregar al carrito\r\n      const boton = card.querySelector(\"button\");\r\n      boton.addEventListener(\"click\", () => agregarAlCarrito(producto));\r\n\r\n      productosContainer.appendChild(card);\r\n    });\r\n  } catch (error) {\r\n    console.error(\"Error al cargar productos:\", error);\r\n    productosContainer.innerHTML =\r\n      \"<p>No se pudieron cargar los productos.</p>\";\r\n  }\r\n}\r\n\r\n// Función para agregar producto al carrito\r\nfunction agregarAlCarrito(producto) {\r\n  const productoEnCarrito = carrito.find((p) => p.id === producto.id);\r\n\r\n  if (productoEnCarrito) {\r\n    productoEnCarrito.cantidad++;\r\n  } else {\r\n    carrito.push({ ...producto, cantidad: 1 });\r\n  }\r\n\r\n  localStorage.setItem(\"carrito\", JSON.stringify(carrito));\r\n  actualizarContador();\r\n  mostrarCarrito();\r\n  alert(`Agregaste \"${producto.title}\" al carrito.`);\r\n}\r\n// Seleccionamos el formulario\r\nconst formulario = document.querySelector(\".formulario-contacto\");\r\n\r\nformulario.addEventListener(\"submit\", function (event) {\r\n  event.preventDefault(); // Prevenir envío automático para validar\r\n\r\n  const nombre = formulario.nombre.value.trim();\r\n  const email = formulario.email.value.trim();\r\n  const mensaje = formulario.mensaje.value.trim();\r\n\r\n  // Regex simple para validar email\r\n  const emailRegex = /^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/;\r\n\r\n  let errores = [];\r\n\r\n  if (nombre === \"\") {\r\n    errores.push(\"El nombre es obligatorio.\");\r\n  }\r\n\r\n  if (email === \"\") {\r\n    errores.push(\"El correo electrónico es obligatorio.\");\r\n  } else if (!emailRegex.test(email)) {\r\n    errores.push(\"El correo electrónico no tiene un formato válido.\");\r\n  }\r\n\r\n  if (mensaje === \"\") {\r\n    errores.push(\"El mensaje es obligatorio.\");\r\n  }\r\n\r\n  if (errores.length > 0) {\r\n    alert(errores.join(\"\\n\"));\r\n    return; // No enviar formulario\r\n  }\r\n\r\n  // Si pasa validación, enviar el formulario con Formspree\r\n  formulario.submit();\r\n});\r\n\r\n// Inicialización\r\ncargarProductos();\r\nactualizarContador();\r\n"],"file":"script.dev.js"}